<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Wk 8 Identity Administration</title>
    <style>
        body {
          font-family: "Arial", "Helvetica", "sans-serif";
        }

        #week08 {
          background-color: #f8ff2e;
        }

        code {
          display:block;
          font-size: larger;
          background-color: lightgoldenrodyellow;
          max-height:400px;
          width:75%;
          overflow:scroll;
        }

        .exercise {
          background-color: #c6ffe2;
        }
		</style>
  </head>
  <body>
    <header> <b>CS296N Web Development 2: ASP.NET &nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;</b>
      <div>Brian Bird</div>
      <br>
      <h1> <i><b>Identity Authentication </b></i></h1>
      <b>Topics by week </b>
      <table style="width: 807px; height: 127px;" border="1">
        <tbody>
          <tr>
            <td id="week01">1. Intro to MVC</td>
            <td id="week06">6. Bower, Bootstrap and Front-End Libraries</td>
          </tr>
          <tr>
            <td id="week02">2. Views and controllers</td>
            <td>7. No new topic</td>
          </tr>
          <tr>
            <td id="week03">3. Repositories and Unit testing</td>
            <td id="week08" style="width: 395.333px;">8. User Management
              with Identity</td>
          </tr>
          <tr>
            <td id="week04">4. Entity Framework + Database</td>
            <td id="week09">9. Authentication and Authorization</td>
          </tr>
          <tr>
            <td id="week05">5. DomainModel + EF + DI - Revisited</td>
            <td id="week10">10. Deploying to a Linux server </td>
          </tr>
        </tbody>
      </table>
      <br>
      <h2><b><b>Contents</b> </b></h2>
      <div>
        <ul>
          <li><a href="#topic1">Introduction</a></li>
          <li><a href="#topic2">Review </a></li>
          <li><a href="#topic3">Identity</a></li>
          <li><a href="#topic6">Further Reading</a></li>
          <li><a href="#topic7">Book Info Web App Example</a></li>
          <li><a href="#topic8">Next Class</a></li>
        </ul>
      </div>
    </header>
    <section>
      <h2> Topics </h2>
      <hr>
      <article id="topic1">
        <h2>Introduction</h2>
        <ul>
          <li>Review lab due dates on Moodle</li>
          <li>Answer questions about lab 5</li>
        </ul>
        <h3>Announcements</h3>
        <ul>
          <li>Scholarship</li>
          <li>Hack for a cause </li>
        </ul>
        <h3>Main focus today</h3>
        <ul>
          <li>Identity</li>
        </ul>
      </article>
      <hr>
      <article id="topic2">
        <h2>Review - Domain Models</h2>
        <ul>
          <li>What are the differences between a <i>domain model</i>
            and a <i>view model?</i></li>
          <li>How is the user related to other parts of our domain
            models?</li>
          <li>Compare our domain models to the one in the Sports Store</li>
        </ul>
      </article>
      <hr>
      <article id="topic3">
        <h2>Identity </h2>
        <h3> Identity is an API for managing users</h3>
        <ul>
          <li> ASP.NET Core Identity is an API for managing users and
            storing user data in<br>
            repositories such as relational databases through Entity
            Framework Core. - Freeman</li>
        </ul>
        <h3>What Identity does</h3>
        <ul>
          <li>Authentication</li>
          <li>Authorization</li>
          <li>Role management</li>
        </ul>
        <h3>Setting up Identity</h3>
        <ul>
          <li> Add it to an existing ASP.NET Core MVC project</li>
          <li> Follow the steps in Freeman, Ch. 28 through the end of
            "Setting up the User Classes".</li>
          <ul>
            <li>Skip "Creating a Controller and View"</li>
            <li>Notes on Freeman Ch 28: <br>
            </li>
            <ul>
              <li>in the Configure method<span style="font-weight:
                  bold;">, </span><span style="font-weight: bold;">app.UseAuthentication



                  must precede app.UseMvc !!!</span></li>
              <li>The app doesn't have much on it's home page. Go to
                /Admin to see the important stuff<br>
              </li>
              <li>It's OK to directly delete the IdentityUsers database
                using SQL Server Object Explorer</li>
              <li>There are special domain names defined for testing and
                examples. These are defined by the <a
                  href="https://www.ietf.org" target="_blank">Internet
                  Engineering Task Force</a><br>
              </li>
              <ul>
                <li>These are the reserved domains, they are invalid for
                  actual use:</li>
                <ul>
                  <li>.test</li>
                  <li>.example</li>
                  <li>.invalid</li>
                  <li>.localhost<br>
                  </li>
                </ul>
                <li>Reference: <a
                    href="https://tools.ietf.org/html/rfc2606"
                    target="_blank">Reserved Top Level Doman Names
                    (TLDs)</a><br>
                </li>
              </ul>
            </ul>
          </ul>
          <ul>
            <li>Notes on implementing Identity in my own code:<br>
            </li>
            <ul>
              <li>I had to add an ID property to my User class in order
                for EF to generate the identity tables in my application
                database. I shouldn't have to do this. It seems like a
                bug in EF or something.</li>
            </ul>
          </ul>
        </ul>
        <ul>
          <ul>
          </ul>
          <li>After adding Identity to your project, Inspect the
            database using SQL Server Object Explorer and note the new
            tables added by Identity. The tables listed below should
            have been created.<br>
            Note: AspNetUsers is your user table, it contains the fields
            you added in your user class.<br>
          </li>
          <ul>
            <li>AspNetRoleClaims</li>
            <li>AspNetRoles</li>
            <li>AspNetUserClaims</li>
            <li>AspNetUserLogins</li>
            <li>AspNetUserRoles</li>
            <li>AspNetUsers</li>
            <li>AspNetUserTokens<br>
            </li>
          </ul>
        </ul>
        <h3>Using&nbsp; Identity in administrative pages</h3>
        <ul>
          <li>Add an admin controller and views:</li>
          <ul>
            <li>Create a user account</li>
            <li>Show all user accounts</li>
            <li>Delete a user account</li>
          </ul>
        </ul>
      </article>
      <hr>
      <article id="topic6">
        <h2>Additional Reading</h2>
        We added Identity to our web app by following the example in
        Freeman Ch. 28. This chapter showed us how to add an
        administration feature to our web app.<br>
        <br>
        <a
href="https://docs.microsoft.com/en-us/aspnet/core/security/authentication/"
          target="_blank">ASP.NET Core tutorial on authentication</a> </article>
      <hr>
      <article id="topic7">
        <h2>Book Info Web App Example</h2>
        <a
href="https://github.com/LCC-CIT/CS296N-BookInfo-Core-2/tree/AddIdentity"
          target="_blank">GitHub Repository: <br>
          CS296N-BookInfo-Core-2<br>
          AddIdentity branch</a> </article>
      <hr>
      <article id="topic8">
        <h2>Next Class</h2>
        <p>We will...</p>
      </article>
    </section>
    <hr style="width: 100%; height: 2px;">
    <footer>
      <a rel="license"
        href="http://creativecommons.org/licenses/by/4.0/"><img
          alt="Creative Commons License" style="border-width:0"
          src="https://i.creativecommons.org/l/by/4.0/80x15.png"></a><span
        xmlns:dct="http://purl.org/dc/terms/" property="dct:title">&nbsp;
ASP.NET

Core
        MVC Lecture Notes</span> by <a
        xmlns:cc="http://creativecommons.org/ns#"
        href="https://birdsbits.blog" property="cc:attributionName"
        rel="cc:attributionURL">Brian Bird</a> is licensed under a <a
        rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative
Commons

Attribution
        4.0 International License</a>. <br>
    </footer>
    <hr>
  </body>
</html>
